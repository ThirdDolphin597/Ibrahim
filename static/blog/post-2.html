<h2>Introduction</h2>
<p>This week was rather unproductive due to unforeseen circumstances with my PCB. Despite successfully soldering all components, I encountered multiple issues that led me down a troubleshooting rabbit hole. In this post, I'll walk you through the problems I faced and how I eventually solved them.</p>

<h2>Soldering the PCB</h2>
<p>The first thing I did this week was solder the components onto the PCB I milled last week. This was the easiest part of the process and the most rewarding.</p>

<img src="/static/images/blog/solder.jpg" alt="Solder" class="blog-post-img">
<p class="blog-post-caption"><em>Soldering components onto the freshly milled PCB</em></p>

<img src="/static/images/blog/pcb.jpg" alt="PCB components" class="blog-post-img">
<p class="blog-post-caption"><em>All components assembled on the PCB</em></p>

<h2>Troubleshooting:</h2>
<p>After soldering everything together, I powered on the PCB expecting to see the LED light up. Unfortunately, nothing happened. I spent hours trying to figure out what went wrong.</p>

<p>First, I used my multimeter to check continuity and verify that 5V was being supplied to the LED. The power was there. I systematically checked each component, and I realized that all my components were being supplied power except the actual microcontroller. There was the problem!</p>

<p>Using some short jumper wires, I created temporary traces to make sure everything else was working. My LED still wouldn't light up. So I tested all my components separately by adding them to a working board. Both the microcontroller and LED worked perfectly in isolation. This meant my PCB had a design flaw, but I couldn't pinpoint where.</p>

<img src="/static/images/blog/fullboard.jpg" alt="Full board" class="blog-post-img">
<p class="blog-post-caption"><em>The completed PCB ready for testing</em></p>

<h2>The Accidental Discovery</h2>
<p>In frustration, I threw my PCB on the table. And then... the light started working! I realized that the light strip connection had a problem - it needed to be bent in a specific way to make contact. As a temporary fix, I bent it to the right position.</p>

<p>But when I decided to resolder it permanently, something went wrong and the light stopped working again. At that point, I decided to create another board from scratch. While I was at it, I also decided to change my switch to act as a software-controlled switch instead of a hardware one.</p>

<img src="/static/images/blog/light.jpg" alt="Light testing" class="blog-post-img-small">
<p class="blog-post-caption"><em>The culprit</em></p>

<h2>Software Control</h2>
<p>For the new design, I implemented software control over the LED. Instead of the switch directly controlling power to the LED, it now sends a digital signal to the microcontroller. I used digital read pins to detect when the switch is pressed and toggle the LED on or off accordingly. This gives me much more control and flexibility over the behavior of the lightbox.</p>

<h3>The Code</h3>
<p>Here's the actual code I used for controlling the LED light strip with Adafruit NeoPixel:</p>

<pre><code>#include &lt;Adafruit_NeoPixel.h&gt;
#include &lt;avr/power.h&gt;

#define PIN 6
#define NUMPIXELS 8

int x;
Adafruit_NeoPixel pixels = Adafruit_NeoPixel(NUMPIXELS, PIN, NEO_GRB + NEO_KHZ800);

void setup() {
  pinMode(2, INPUT);
  pixels.begin();
}

void loop() {
  x = digitalRead(2);
  if (x == 1) {
    pixels.setPixelColor(0, pixels.Color(0, 0, 0));
    pixels.setPixelColor(1, pixels.Color(0, 0, 0));
    pixels.setPixelColor(2, pixels.Color(0, 0, 0));
    pixels.setPixelColor(3, pixels.Color(0, 0, 0));
    pixels.setPixelColor(4, pixels.Color(0, 0, 0));
    pixels.setPixelColor(5, pixels.Color(0, 0, 0));
    pixels.setPixelColor(6, pixels.Color(0, 0, 0));
    pixels.setPixelColor(7, pixels.Color(0, 0, 0));
  } else {
    pixels.setPixelColor(0, pixels.Color(85, 213, 85));
    pixels.setPixelColor(1, pixels.Color(43, 195, 210));
    pixels.setPixelColor(2, pixels.Color(64, 191, 255));
    pixels.setPixelColor(3, pixels.Color(64, 191, 255));
    pixels.setPixelColor(4, pixels.Color(5, 127, 215));
    pixels.setPixelColor(5, pixels.Color(5, 127, 215));
    pixels.setPixelColor(6, pixels.Color(16, 78, 146));
    pixels.setPixelColor(7, pixels.Color(16, 78, 146));
  }

  pixels.show();
}</code></pre>

<p>The code uses the Adafruit NeoPixel library to control a WS2812B LED strip. When the switch (pin 2) reads HIGH, the LEDs turn off. When it reads LOW, each pixel is set to a different color, creating a gradient effect from green to blue. The <code>pixels.show()</code> call updates the display with the new colors.</p>

<h2>Next Steps</h2>
<p>With the lessons learned from this week, I'm building a new PCB with better traces and proper switch integration. Hopefully, this version will work reliably!</p>
